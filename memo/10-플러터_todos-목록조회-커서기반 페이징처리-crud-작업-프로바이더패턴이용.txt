#í”ŒëŸ¬í„° #ëª¨ë°”ì¼ê°œë°œ

ìŠ¤í”„ë§ ì„œë²„ ì—°ë™ ì‘ì—…2, 
todos crud, ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• ì²˜ë¦¬. 
jwt ì´ìš©í•´ì„œ, ì¸ì¦ í›„, ìš”ì²­ ë° ì‘ë‹µ 

ì¤€ë¹„ë¬¼ : ìŠ¤í”„ë§ ë°±ì—”ë“œ ì‘ì—…í•œ ì„œë²„ í•„ìš”. 
IDE : ì¸í…”ë¦¬ ì œì´
ë§ˆë¦¬ì•„ ë””ë¹„ ì‚¬ìš©ì¤‘. (ë„ì»¤ ì´ìš©, ë””ë¹„ ì„œë²„ ì¼œê¸°)
ê¹ƒ ì£¼ì†Œ : 
https://github.com/lsy3709/Server501_Test/tree/main/SpringBasic/api5012

ê¸°ëŠ¥ í™•ì¸
ì‹œìŠ¤í…œì´ jwt í† í° ì¸ì¦ í˜•ì‹ìœ¼ë¡œ ë˜ì–´ì„œ, 

ì¸ì¦ í™•ì¸ ë°©ë²•. 

í¬ìŠ¤íŠ¸ë§¨ìœ¼ë¡œ 

ë©”ì†Œë“œ : post 
ì£¼ì†Œ : http://localhost:8080/generateToken
raw -> json í˜•ì‹ìœ¼ë¡œ 
ì˜ˆì‹œ)
{
    "mid" : "lsy",
    "mpw" : "1234"
}

2

í¬ìŠ¤íŠ¸ë§¨ìœ¼ë¡œ 

ë©”ì†Œë“œ : post 
ì£¼ì†Œ : http://localhost:8080/member/register
raw -> json í˜•ì‹ìœ¼ë¡œ 

íšŒì› ê°€ì… í•„ìš”í•  ê²½ìš°. 

{
    "mid" :"admin",
    "mpw" : "1234"
}


ë¦¬í„´, ì•¡ì„¸ìŠ¤ í† í° ë°›ìœ¼ë©´ ì´ê±¸ë¡œ ì‘ì—…. 
ì˜ˆì‹œ)
{
     "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtaWQiOiJsc3kiLCJpYXQiOjE3NDM2Mzk0NzQsImV4cCI6MTc0MzcyNTg3NH0.Vlokf1ouEs5DFj9ho1OJSyHFt0yJQSA_EBwxvUHgzvY",
    "refreshToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtaWQiOiJsc3kiLCJpYXQiOjE3NDM2Mzk0NzQsImV4cCI6MTc0NjIzMTQ3NH0.7_zbxf_eXzIPKHFIE9T05Hb0zMCnlsoBK0H1EsgslNw"
}

1 í¬ìŠ¤íŠ¸ë§¨ 

2 ìŠ¤ì›¨ê±° ì´ìš©. 
http://localhost:8080/swagger-ui/index.html

ìƒë‹¨ì˜ authorize ë¶€ë¶„ì— ì•¡ì„¸ìŠ¤ í† í° ì…ë ¥ í›„, 
ì•„ë˜ì˜ ë ˆìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ í™•ì¸ í•˜ë©´ë¨. 

=========================================================
í”ŒëŸ¬í„° , í™”ë©´ì‘ì—…, ì»¨íŠ¸ë¡¤ëŸ¬ ì‘ì—… í•„ìš”í•¨. 

í´ë” 
sample_routing -> todos_test ->
controller, screen í™”ë©´ ê°ê° í´ë” ìƒì„±. 


1.
todos  ì „ì²´ ì¡°íšŒ. 

ì‘ì—…

1) 
ì»¨íŠ¸ë¡¤ëŸ¬
todos_list_controller.dart



1)-2 , TodoDTO ë§Œë“¤ê¸°. 
dto -> todos_todoDTO.dart

class TodoDTO {
  final int tno;
  final String title;
  final String description;
  final String writer;
  final DateTime dueDate;
  final bool complete;

  TodoDTO({
    required this.tno,
    required this.title,
    required this.description,
    required this.writer,
    required this.dueDate,
    required this.complete,
  });

  factory TodoDTO.fromJson(Map<String, dynamic> json) {
    return TodoDTO(
      tno: json['tno'] ?? 0,
      title: json['title'] ?? "ì œëª© ì—†ìŒ",
      description: json['description'] ?? "ì„¤ëª… ì—†ìŒ",
      writer: json['writer'] ?? "ì•Œ ìˆ˜ ì—†ìŒ",
      dueDate: json['dueDate'] != null
          ? DateTime.parse(json['dueDate']) // âœ… JSON â†’ DateTime ë³€í™˜
          : DateTime.now(),
      complete: json['complete'] ?? false,
    );
  }

  // âœ… dueDateë¥¼ "YYYY-MM-DD HH:mm" í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ ì¶”ê°€
  String get formattedDueDate {
    return "${dueDate.year}-${_twoDigits(dueDate.month)}-${_twoDigits(dueDate.day)} ";
    // "${_twoDigits(dueDate.hour)}:${_twoDigits(dueDate.minute)}";
  }

  // âœ… í•œ ìë¦¬ ìˆ˜ì¼ ê²½ìš° ì•ì— 0ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
  String _twoDigits(int n) {
    return n.toString().padLeft(2, '0');
  }

  Map<String, dynamic> toJson() {
    return {
      "tno": tno,
      "title": title,
      "description": description,
      "writer": writer,
      "dueDate": "${dueDate.year}-${dueDate.month.toString().padLeft(2, '0')}-${dueDate.day.toString().padLeft(2, '0')}", // âœ… ë‚ ì§œ í¬ë§· ìˆ˜ì •
      "complete": complete,
    };
  }
}

1)-3 
todos_page_response_dto.dart 
class PageResponseDTO<T> {
  final int page;
  final int size;
  final int total;
  final int start;
  final int end;
  final bool prev;
  final bool next;
  final List<T> dtoList;

  // âœ… ì¶”ê°€ëœ ë©¤ë²„ ë³€ìˆ˜
  final int? nextCursor; // ë‹¤ìŒ í˜ì´ì§€ ìš”ì²­ì„ ìœ„í•œ ì»¤ì„œ ID
  final bool hasNext; // ë‹¤ìŒ ë°ì´í„° ì¡´ì¬ ì—¬ë¶€

  PageResponseDTO({
    required this.page,
    required this.size,
    required this.total,
    required this.start,
    required this.end,
    required this.prev,
    required this.next,
    required this.dtoList,
    required this.nextCursor, // âœ… ì¶”ê°€
    required this.hasNext, // âœ… ì¶”ê°€
  });

  factory PageResponseDTO.fromJson(Map<String, dynamic> json, T Function(Map<String, dynamic>) fromJsonT) {
    return PageResponseDTO(
      page: json['page'] ?? 1, // ê¸°ë³¸ê°’ 1
      size: json['size'] ?? 10, // ê¸°ë³¸ê°’ 10
      total: json['total'] ?? 0, // ê¸°ë³¸ê°’ 0
      start: json['start'] ?? 1, // ê¸°ë³¸ê°’ 1
      end: json['end'] ?? 1, // ê¸°ë³¸ê°’ 1
      prev: json['prev'] ?? false, // ê¸°ë³¸ê°’ false
      next: json['next'] ?? false, // ê¸°ë³¸ê°’ false
      dtoList: (json['dtoList'] as List?)?.map((item) => fromJsonT(item)).toList() ?? [], // `null`ì´ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
      nextCursor: json['nextCursor'], // âœ… ì¶”ê°€
      hasNext: json['hasNext'] ?? false, // âœ… ì¶”ê°€
    );
  }
}


2) 
í™”ë©´ 
todos_list_screen.dart 

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../controller/todos_list_controller.dart';

class TodosScreen extends StatefulWidget {
  const TodosScreen({super.key});

  @override
  _TodosScreenState createState() => _TodosScreenState();
}

class _TodosScreenState extends State<TodosScreen> {
  // ê²€ìƒ‰ì°½ ì— ëŒ€í•œ , ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë”°ë¡œ ë¶„ë¦¬ ì‘ì—…í–ˆìŒ.
  late ScrollController _scrollController;
  final TextEditingController _searchController = TextEditingController();
  final FocusNode _searchFocusNode = FocusNode(); // âœ… í¬ì»¤ìŠ¤ ê°ì§€ìš© FocusNode
  bool showScrollToTopButton = false;

  @override
  void initState() {
    super.initState();
    final todoController = context.read<TodoController>();

    WidgetsBinding.instance.addPostFrameCallback((_) {
      todoController.fetchTodos();
    });

    // ìŠ¤í¬ë¡¤ ë²„íŠ¼ì„ í´ë¦­ì‹œ, í™”ë©´ ì´ë™ ìš©ìœ¼ë¡œ ë§Œë“¦.
    // ì›¹ -> íƒ‘ ë²„íŠ¼.
    _scrollController = ScrollController();
    _scrollController.addListener(() {
      if (_scrollController.position.pixels > 300) {
        if (!showScrollToTopButton) {
          setState(() {
            showScrollToTopButton = true;
          });
        }
      } else {
        if (showScrollToTopButton) {
          setState(() {
            showScrollToTopButton = false;
          });
        }
      }

      if (_scrollController.position.pixels == _scrollController.position.maxScrollExtent &&
          !todoController.isFetchingMore) {
        todoController.fetchMoreTodos();
      }
    });
  }

  @override
  void dispose() {
    _scrollController.dispose();
    _searchController.dispose();
    _searchFocusNode.dispose();
    super.dispose();
  }

  void _scrollToTop() {
    _scrollController.animateTo(
      0,
      duration: const Duration(milliseconds: 500),
      curve: Curves.easeInOut,
    );
  }

  void _clearSearch() {
    setState(() {
      _searchController.clear();
      context.read<TodoController>().updateSearchParams("TWC", ""); // âœ… ê²€ìƒ‰ì–´ ë° ê²°ê³¼ ì´ˆê¸°í™”
    });
  }

  @override
  Widget build(BuildContext context) {
    final todoController = context.watch<TodoController>();

    return GestureDetector(
      onTap: () {
        // âœ… ë‹¤ë¥¸ ê³³ì„ í„°ì¹˜í•˜ë©´ í‚¤ë³´ë“œ ìˆ¨ê¸°ê³  ê²€ìƒ‰ ì´ˆê¸°í™”
        if (_searchFocusNode.hasFocus) {
          _searchFocusNode.unfocus();
          // _clearSearch();
        }
      },
      child: Scaffold(
        appBar: AppBar(title: const Text("Todos ë¦¬ìŠ¤íŠ¸")),
        body: Column(
          children: [
            // âœ… ê²€ìƒ‰ ì…ë ¥ì°½
            Container(
              height: 100,
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 10),
              child: TextField(
                controller: _searchController,
                focusNode: _searchFocusNode, // âœ… í¬ì»¤ìŠ¤ ë…¸ë“œ ì ìš©
                decoration: InputDecoration(
                  labelText: "ê²€ìƒ‰ì–´ ì…ë ¥",
                  border: OutlineInputBorder(),
                  suffixIcon: _searchController.text.isNotEmpty
                      ? IconButton(
                    icon: const Icon(Icons.clear),
                    onPressed: _clearSearch,
                  )
                      : null,
                ),
                onChanged: (value) {
                  todoController.updateSearchParams("TWC", value); // âœ… ê²€ìƒ‰ì–´ ë³€ê²½ ì‹œ ì¦‰ì‹œ ì„œë²„ í˜¸ì¶œ
                },
              ),
            ),

            // âœ… ê²€ìƒ‰ ê²°ê³¼ ë° ì¶œë ¥ ê°œìˆ˜ í‘œì‹œ
            Padding(
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 5),
              child: Align(
                alignment: Alignment.centerLeft,
                child: Text(
                  todoController.todos.isEmpty
                      ? "ğŸ” ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤."
                      : "ğŸ” ê²€ìƒ‰ì–´: \"${todoController.keyword}\" / ì´ ${todoController.remainingCount }ê°œ ì¤‘ ${todoController.todos.length}ê°œ ì¶œë ¥",
                  style: const TextStyle(fontSize: 14, fontWeight: FontWeight.w500, color: Colors.black87),
                ),
              ),
            ),

            // âœ… ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
            Expanded(
              child: todoController.isLoading
                  ? const Center(child: CircularProgressIndicator())
                  : todoController.todos.isEmpty
                  ? const Center(child: Text("í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤."))
                  : ListView.builder(
                controller: _scrollController,
                itemCount: todoController.todos.length + (todoController.hasMore ? 1 : 0),
                itemBuilder: (context, index) {
                  if (!todoController.hasMore && index == todoController.todos.length) {
                    return const SizedBox();
                  }

                  if (index == todoController.todos.length) {
                    return const Center(
                      child: Padding(
                        padding: EdgeInsets.all(10.0),
                        child: CircularProgressIndicator(),
                      ),
                    );
                  }

                  final todo = todoController.todos[index];
                  return ListTile(
                    title: Text(
                      "${index + 1}. ${todo.title}",
                      style: const TextStyle(fontSize: 16, fontWeight: FontWeight.bold),
                    ),
                    subtitle: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Row(
                          children: [
                            Text("ID: ${todo.tno}",
                                style: const TextStyle(fontSize: 12, fontWeight: FontWeight.w500, color: Colors.black54)),
                            Text(", ì‘ì„±ì: ${todo.writer}",
                                style: const TextStyle(fontSize: 12, fontWeight: FontWeight.w500, color: Colors.black54)),
                          ],
                        ),
                        Text("ì‘ì„±ì¼: ${todo.dueDate}",
                            style: const TextStyle(fontSize: 12, fontWeight: FontWeight.w500, color: Colors.black54)),
                        Icon(
                          todo.complete ? Icons.check_circle : Icons.circle_outlined,
                          color: todo.complete ? Colors.green : Colors.grey,
                          size: 24,
                        ),
                        Text(
                          todo.complete ? 'ì™„ë£Œ' : 'ë¯¸ì™„ë£Œ',
                          style: TextStyle(
                            fontSize: 14,
                            color: todo.complete ? Colors.black : Colors.grey,
                            decoration: todo.complete ? TextDecoration.lineThrough : TextDecoration.none,
                          ),
                        ),
                      ],
                    ),
                    trailing: Row(
                      mainAxisSize: MainAxisSize.min,
                      children: [
                        // âœ… ìˆ˜ì • ì•„ì´ì½˜ ë²„íŠ¼ ì¶”ê°€
                        IconButton(
                          icon: const Icon(Icons.edit, color: Colors.blue),
                          onPressed: () {
                            Navigator.pushNamed(
                              context,
                              "/todoDetail",
                              arguments: todo.tno, // âœ… tno ì „ë‹¬
                            );
                          },
                        ),
                        // âœ… ì‚­ì œ ë²„íŠ¼ (ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í˜¸ì¶œ)
                        IconButton(
                          icon: const Icon(Icons.delete, color: Colors.red),
                          // onPressed: () => todoController.confirmDelete(context, todo.tno),
                          onPressed: () => {},
                        ),
                      ],
                    ),
                  );
                },
              ),
            ),
          ],
        ),

        // âœ… "ë§¨ ìœ„ë¡œ" ë²„íŠ¼ ë° "ì¶”ê°€í•˜ê¸°" ë²„íŠ¼
        floatingActionButton: Column(
          mainAxisAlignment: MainAxisAlignment.end,
          children: [
            if (showScrollToTopButton)
              FloatingActionButton(
                heroTag: "scrollToTop",
                onPressed: _scrollToTop,
                backgroundColor: Colors.blueAccent,
                child: const Icon(Icons.arrow_upward, color: Colors.white),
              ),
            const SizedBox(height: 10),
            FloatingActionButton(
              heroTag: "addTodo",
              onPressed: () {
                Navigator.pushNamed(context, "/todoCreate");
              },
              child: const Icon(Icons.add),
            ),
          ],
        ),
      ),
    );
  }
}

3) 
í”„ë¡œë°”ì´ë” ë“±ë¡ 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_app_routing.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_controller/food_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_list_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_login_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_signup_controller.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';


void main() {
  // runApp(MyApp());
  // í”„ë¡œë°”ì´ë” ë“±ë¡ ì‘ì—…,
  // runApp(MyAppRouting());
  runApp(
    MultiProvider(
        providers: [
          ChangeNotifierProvider(create: (context) => FoodController()),
          ChangeNotifierProvider(create: (context) => LoginController()),
          ChangeNotifierProvider(create: (context) => SignupController()),
          ChangeNotifierProvider(create: (context) => TodoController())
        ],
    child: const MyAppRouting(),)
  );
}





4)
ë¼ìš°íŒ… ì—°ê²° 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen2.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_screen/my_pd_test_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/signup_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_list_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_login.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_signup_screen.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const TodosMainScreen(),
        '/signup': (context) => const TodosSignupScreen(),
        '/login': (context) => const LoginScreen(),
        '/pdtest1': (context) => const MyPdTestScreen(),
        '/todos': (context) => const TodosScreen(),
      },
    );
  }
}


5) 
ë©”ì¸ í™”ë©´ì— ë²„íŠ¼ ì¶”ê°€

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:provider/provider.dart';

import '../controller/todos_login_controller.dart';

class TodosMainScreen extends StatefulWidget {
  const TodosMainScreen({super.key});

  @override
  State<TodosMainScreen> createState() => _TodosMainScreenState();
}

class _TodosMainScreenState extends State<TodosMainScreen> {
  // í”ŒëŸ¬í„° ì „ìš©ì˜ ì €ì¥ì†Œì— ì ‘ê·¼ í•˜ëŠ” ë„êµ¬, ê°€ì ¸ì˜¤ê¸°, ì„¤ì •í•˜ê¸°.
  final FlutterSecureStorage secureStorage = const FlutterSecureStorage();
  String? userId;

  // ìµœì´ˆì— í™”ë©´ì„ ê·¸ë¦´ ë•Œ ë™ì‘í•¨.
  @override
  void initState() {
    super.initState();
    _loadUserId();
  }

  // í™”ë©´ì´ ë³€ê²½ì‹œ ë§ˆë‹¤ í˜¸ì¶œ.
  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    _loadUserId(); // ë¡œê·¸ì•„ì›ƒ í›„ ë‹¤ì‹œ í™”ë©´ ì—´ë¦´ ë•Œ í˜¸ì¶œë¨
  }


  // ë³´ì•ˆ ì €ì¥ì†Œì—ì„œ ë¡œê·¸ì¸í•œ ìœ ì € ID ë¶ˆëŸ¬ì˜¤ê¸°
  Future<void> _loadUserId() async {
    String? mid = await secureStorage.read(key: "mid"); // ì €ì¥ëœ ID ê°€ì ¸ì˜¤ê¸°
    // ë¦¬ì•¡íŠ¸ ë¹„ìŠ·í•œ êµ¬ì¡°ì´ê³ , ìŠ¤í…Œì´íŠ¸ ìƒíƒœê°€ ë³€ê²½ì´ ë˜ë©´, í™”ë©´ë„ ê°™ì´ ì—…ë°ì´íŠ¸
    setState(() {
      userId = mid;
    });
  }

  @override
  Widget build(BuildContext context) {
    final loginController = context.watch<LoginController>();

    return Scaffold(
      appBar: AppBar(title: const Text('ë©”ì¸ í™”ë©´'),
          actions: [
            // ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œë§Œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ
            if (loginController.isLoggedIn)
              IconButton(
                icon: const Icon(Icons.logout),
                onPressed: () => loginController.showLogoutDialog(context),
              ),
          ]
      ),

      body: SafeArea(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Center(
              child: Text(
                userId != null ? "í™˜ì˜í•©ë‹ˆë‹¤, $userIdë‹˜!" : "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                style: const TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
                textAlign: TextAlign.center,
              ),
            ),
            const Center(child: FlutterLogo(size: 100)),
            const SizedBox(height: 20),
            if (!loginController.isLoggedIn)
            ElevatedButton(
              //ë¼ìš°íŒ… 2ë²ˆ ì§¸ ì¤€ë¹„ë¬¼,
              onPressed: () => Navigator.pushNamed(context, '/signup'),
              child: const Text('íšŒì› ê°€ì…'),
            ),

            if (!loginController.isLoggedIn)
            OutlinedButton(
              onPressed: () => Navigator.pushNamed(context, '/login'),
              child: const Text('ë¡œê·¸ì¸'),
            ),

            if (loginController.isLoggedIn)
            OutlinedButton(
              onPressed: () => Navigator.pushNamed(context, '/pdtest1'),
              child: const Text('ê³µê³µë°ì´í„° ì—°ë™1'),
            ),
            if (loginController.isLoggedIn)
              OutlinedButton(
                onPressed: () => Navigator.pushNamed(context, '/todos'),
                child: const Text('todos ì—°ë™ ë¦¬ìŠ¤íŠ¸'),
              ),

          ],
        ),
      ),
    );

  }
}

=================================================
ê¸€ì‘ì„± 


1
í™”ë©´ 
todos_add_screen.dart

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../controller/todos_list_controller.dart';

class TodoCreateScreen extends StatefulWidget {
  const TodoCreateScreen({super.key});

  @override
  _TodoCreateScreenState createState() => _TodoCreateScreenState();
}

class _TodoCreateScreenState extends State<TodoCreateScreen> {
  final TextEditingController _titleController = TextEditingController();
  DateTime? _dueDate;
  bool _complete = false;
  String? userId; // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ì €ì¥

  @override
  void initState() {
    super.initState();

    // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
    WidgetsBinding.instance.addPostFrameCallback((_) async {
      final todoController = context.read<TodoController>();
      String? mid = await todoController.getLoggedInUserId();
      setState(() {
        userId = mid;
      });
    });
  }

  Future<void> _submitTodo() async {
    if (_titleController.text.isEmpty) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text("ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.")),
      );
      return;
    }

    final todoController = context.read<TodoController>();

    bool success = await todoController.createTodo(
      _titleController.text,
      _dueDate ?? DateTime.now(),
      _complete,
    );

    if (success) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text("í•  ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.")),
      );
      Navigator.pop(context); // âœ… ì‘ì„± ì™„ë£Œ í›„ ë¦¬ìŠ¤íŠ¸ í™”ë©´ìœ¼ë¡œ ì´ë™
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("í•  ì¼ ì¶”ê°€")),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: ListView(
          children: [
            Text(
              userId != null ? "í™˜ì˜í•©ë‹ˆë‹¤, $userIdë‹˜!" : "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.",
              style: const TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),
            TextField(
              controller: _titleController,
              decoration: const InputDecoration(labelText: "ì œëª©"),
            ),
            const SizedBox(height: 16),
            TextField(
              controller: TextEditingController(text: userId ?? ""),
              enabled: false, // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ìë™ ì…ë ¥ (ìˆ˜ì • ë¶ˆê°€ëŠ¥)
              decoration: const InputDecoration(labelText: "ì‘ì„±ì"),
            ),
            const SizedBox(height: 16),
            Row(
              children: [
                const Text("ë§ˆê°ì¼: "),
                Text(_dueDate != null
                    ? "${_dueDate!.year}-${_dueDate!.month}-${_dueDate!.day}"
                    : "ì„ íƒ ì•ˆë¨"),
                IconButton(
                  icon: const Icon(Icons.calendar_today),
                  onPressed: () async {
                    DateTime? pickedDate = await showDatePicker(
                      context: context,
                      initialDate: _dueDate ?? DateTime.now(),
                      firstDate: DateTime(2000),
                      lastDate: DateTime(2100),
                    );
                    if (pickedDate != null) {
                      setState(() {
                        _dueDate = pickedDate;
                      });
                    }
                  },
                ),
              ],
            ),
            const SizedBox(height: 16),
            CheckboxListTile(
              title: const Text("ì™„ë£Œ"),
              value: _complete,
              onChanged: (value) {
                setState(() {
                  _complete = value!;
                });
              },
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: _submitTodo,
              child: const Text("ì €ì¥"),
            ),
          ],
        ),
      ),
    );
  }
}


2
ì»¨íŠ¸ë¡¤ëŸ¬ 
todoController ì¬ì‚¬ìš©
ì½”ë“œ ì‘ì„±.
ì¶”ê°€ 
...
 // ê¸€ì‘ì„± ë¶€ë¶„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬
// âœ… Todo ì‘ì„± ìš”ì²­ (`POST /api/todo`)
  Future<bool> createTodo(String title, DateTime dueDate, bool complete) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    String? mid = await getLoggedInUserId(); // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°

    if (accessToken == null || mid == null) {
      print("âš ï¸ [Flutter] ì•¡ì„¸ìŠ¤ í† í° ë˜ëŠ” ì‚¬ìš©ì ID ì—†ìŒ");
      return false;
    }

    final Uri requestUrl = Uri.parse("$serverIp/");

    final Map<String, dynamic> postData = {
      "title": title,
      "writer": mid, // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ìë™ ì…ë ¥
      "dueDate":
      "${dueDate.year}-${dueDate.month.toString().padLeft(2, '0')}-${dueDate.day.toString().padLeft(2, '0')}",
      "complete": complete,
    };

    try {
      final response = await http.post(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
        body: jsonEncode(postData),
      );

      print("ğŸ“¢ [Flutter] ì‘ë‹µ ì½”ë“œ: ${response.statusCode}");
      print("ğŸ“¢ [Flutter] ì‘ë‹µ ë°”ë””: ${response.body}");

      if (response.statusCode == 200) {
        print("âœ… [Flutter] Todo ì‘ì„± ì„±ê³µ!");

        // âœ… ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
        await fetchTodos();
        notifyListeners();
        return true;
      } else {
        print("âš ï¸ [Flutter] ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.body}");
      }
    } catch (e) {
      print("âŒ [Flutter] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return false;
  }
  

3
í”„ë¡œë°”ì´ë” ë“±ë¡ 
todoController ì¬ì‚¬ìš©

4
ë¼ìš°íŒ… ì—°ê²° 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen2.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_screen/my_pd_test_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/signup_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_add_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_list_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_login.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_signup_screen.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const TodosMainScreen(),
        '/signup': (context) => const TodosSignupScreen(),
        '/login': (context) => const LoginScreen(),
        '/pdtest1': (context) => const MyPdTestScreen(),
        '/todos': (context) => const TodosScreen(),
        '/todoCreate': (context) => const TodoCreateScreen(),
      },
    );
  }
}

===============================================

ì‚­ì œ, 

1 
í™”ë©´, 
ë¦¬ìŠ¤íŠ¸ í™”ë©´ì—ì„œ, ì‚­ì œ ì•„ì´ì½˜ ìœ¼ë¡œ ëŒ€ì²´ 

// âœ… ì‚­ì œ ë²„íŠ¼ (ì‚­ì œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í˜¸ì¶œ)
ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë¶€ë¶„ ì¶”ê°€í•˜ê¸°.

IconButton(
  icon: const Icon(Icons.delete, color: Colors.red),
  onPressed: () => todoController.confirmDelete(context, todo.tno),

2
ì»¨íŠ¸ë¡¤ëŸ¬ ì¬ìƒìš©, 
ì‚­ì œ ë¡œì§ ì¶”ê°€. 

//ì‚­ì œ ë¡œì§ ì¶”ê°€.

  Future<bool> deleteTodo(int tno) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    if (accessToken == null) {
      print("âš ï¸ [Flutter] accessToken ì—†ìŒ!");
      return false;
    }

    final Uri requestUrl = Uri.parse("$serverIp/$tno");
    print("ğŸ“¢ [Flutter] DELETE ìš”ì²­ URL: $requestUrl");

    try {
      final response = await http.delete(
        requestUrl,
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer $accessToken",
        },
      );

      if (response.statusCode == 200) {
        print("âœ… [Flutter] Todo ì‚­ì œ ì„±ê³µ!");

        // âœ… ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
        await fetchTodos(); // âœ… UI ì—…ë°ì´íŠ¸
        notifyListeners();

        return true;
      } else {
        print("âš ï¸ [Flutter] ì‚­ì œ ì‹¤íŒ¨: ${response.body}");
      }
    } catch (e) {
      print("âŒ [Flutter] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return false;
  }

  void confirmDelete(BuildContext context, int tno) {
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: const Text("ì‚­ì œ í™•ì¸"),
          content: const Text("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text("ì·¨ì†Œ"),
            ),
            TextButton(
              onPressed: () async {
                Navigator.of(context).pop(); // âœ… ë‹¤ì´ì–¼ë¡œê·¸ ë‹«ê¸°
                bool success = await deleteTodo(tno);
                if (success) {
                  ScaffoldMessenger.of(context).showSnackBar(
                    const SnackBar(content: Text("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")),
                  );
                }
              },
              child: const Text("ì‚­ì œ", style: TextStyle(color: Colors.red)),
            ),
          ],
        );
      },
    );
  }

3 
í”„ë¡œë°”ì´ë” ë“±ë¡ ì¬ì‚¬ìš©. 

4
ë¼ìš°íŒ… , í™”ë©´ì´ ì—†ì–´ì„œ, ë”°ë¡œ ë¶ˆí•„ìš”

-------------------------------------------
ìˆ˜ì •. 

1 
í™”ë©´ 
todos_edit_screen.dart 

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../controller/todos_list_controller.dart';
import '../dto/todos_todoDTO.dart';

class TodoDetailScreen extends StatefulWidget {
  final int tno;

  const TodoDetailScreen({super.key, required this.tno});

  @override
  _TodoDetailScreenState createState() => _TodoDetailScreenState();
}

class _TodoDetailScreenState extends State<TodoDetailScreen> {
  final TextEditingController _titleController = TextEditingController();
  final TextEditingController _writerController = TextEditingController();
  DateTime? _dueDate;
  bool _complete = false;
  bool isLoading = true;

  @override
  void initState() {
    super.initState();
    _fetchTodoDetails();
  }

  // âœ… `GET /api/todo/{tno}` ìš”ì²­ (Todo ìƒì„¸ ì¡°íšŒ)
  Future<void> _fetchTodoDetails() async {
    final todoController = Provider.of<TodoController>(context, listen: false);
    TodoDTO? todo = await todoController.fetchTodoDetails(widget.tno);

    if (todo != null) {
      setState(() {
        _titleController.text = todo.title;
        _writerController.text = todo.writer;
        _dueDate = todo.dueDate;
        _complete = todo.complete;
        isLoading = false;
      });
    } else {
      // ì˜¤ë¥˜ ì²˜ë¦¬
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text("í•  ì¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")),
      );
      Navigator.pop(context);
    }
  }

  // âœ… `PUT /api/todo/{tno}` ìš”ì²­ (Todo ìˆ˜ì •)
  Future<void> _updateTodo() async {
    final todoController = Provider.of<TodoController>(context, listen: false);
    bool success = await todoController.updateTodo(
      widget.tno,
      _titleController.text,
      _writerController.text,
      _dueDate!,
      _complete,
    );

    if (success) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text("í•  ì¼ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")),
      );
      Navigator.pop(context, true); // ìˆ˜ì • ì™„ë£Œ í›„ ì´ì „ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("í•  ì¼ ìˆ˜ì •")),
      body: isLoading
          ? const Center(child: CircularProgressIndicator())
          : Padding(
        padding: const EdgeInsets.all(16.0),
        child: ListView(
          children: [
            TextField(
              controller: _titleController,
              decoration: const InputDecoration(labelText: "ì œëª©"),
            ),
            const SizedBox(height: 16),
            TextField(
              controller: _writerController,
              enabled: false, // ì™„ì „ ë¹„í™œì„±í™” (íšŒìƒ‰ UI)
              decoration: const InputDecoration(labelText: "ì‘ì„±ì"),
            ),
            const SizedBox(height: 16),
            Row(
              children: [
                const Text("ë§ˆê°ì¼: "),
                Text(_dueDate != null
                    ? "${_dueDate!.year}-${_dueDate!.month}-${_dueDate!.day}"
                    : "ì„ íƒ ì•ˆë¨"),
                IconButton(
                  icon: const Icon(Icons.calendar_today),
                  onPressed: () async {
                    DateTime? pickedDate = await showDatePicker(
                      context: context,
                      initialDate: _dueDate ?? DateTime.now(),
                      firstDate: DateTime(2000),
                      lastDate: DateTime(2100),
                    );
                    if (pickedDate != null) {
                      setState(() {
                        _dueDate = pickedDate;
                      });
                    }
                  },
                ),
              ],
            ),
            const SizedBox(height: 16),
            CheckboxListTile(
              title: const Text("ì™„ë£Œ"),
              value: _complete,
              onChanged: (value) {
                setState(() {
                  _complete = value!;
                });
              },
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: _updateTodo,
              child: const Text("ìˆ˜ì • ì™„ë£Œ"),
            ),
          ],
        ),
      ),
    );
  }
}

2
ì»¨íŠ¸ë¡¤ëŸ¬ 
ë¡œì§ í•„ìš”. 
import 'dart:convert';

import 'package:flutter/cupertino.dart';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:http/http.dart' as http;

import '../dto/todos_page_response_dto.dart';
import '../dto/todos_todoDTO.dart';

class TodoController extends ChangeNotifier {
  // ë¡œê·¸ì¸í•œ ìœ ì € mid, ì•¡ì„¸ìŠ¤ í† í°, ë¦¬í”Œë ˆì‰¬ í† í° ì¡´ì¬.
  final FlutterSecureStorage secureStorage = const FlutterSecureStorage();
  final String serverIp = "http://10.100.201.87:8080/api/todo"; // ì„œë²„ ì£¼ì†Œ

  List<TodoDTO> todos = [];
  bool isLoading = false;
  bool isFetchingMore = false; // âœ… ì¶”ê°€ ë°ì´í„° ë¡œë“œ ì¤‘ ì—¬ë¶€
  bool hasMore = true; // âœ… ì¶”ê°€ ë°ì´í„° ì—¬ë¶€ í™•ì¸


  // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
  int? lastCursorId; // âœ… ë§ˆì§€ë§‰ ì•„ì´í…œ ID (ì»¤ì„œ)
  int remainingCount = 10; // âœ… ìµœì´ˆ í˜¸ì¶œ ì´í›„ ì¤„ì—¬ë‚˜ê°ˆ ë°ì´í„° ê°œìˆ˜

  // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
  Future<String?> getLoggedInUserId() async {
    return await secureStorage.read(key: "mid"); // ë³´ì•ˆ ì €ì¥ì†Œì—ì„œ ìœ ì € ID ê°€ì ¸ì˜¤ê¸°
  }

  // âœ… ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ì¶”ê°€
  String searchType = "TWC"; // ê¸°ë³¸ ê²€ìƒ‰ íƒ€ì…
  String keyword = "";

  // âœ… ê²€ìƒ‰ì–´ ë³€ê²½
  void updateSearchParams(String type, String newKeyword) {
    searchType = type;
    keyword = newKeyword;
    fetchTodos(); // âœ… ê²€ìƒ‰ì–´ ë³€ê²½ ì‹œ ë‹¤ì‹œ ë°ì´í„° ìš”ì²­
  }


  // Todos ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ ìš”ì²­
  Future<void> fetchTodos() async {
    isLoading = true;

    // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
    lastCursorId = null; // âœ… ì»¤ì„œë¥¼ ì´ˆê¸°í™”
    remainingCount = 10; //  âœ… ìµœì´ˆì—ëŠ” ì „ì²´ ê°œìˆ˜ë¥¼ ë¨¼ì € ê°€ì ¸ì˜´
    // í˜ì´ì§•_ê¸°ë°˜_ì½”ë“œ
    // currentPage = 1;
    hasMore = true; // âœ… ì²˜ìŒ ë¡œë“œí•  ë•Œ ë” ë§ì€ ë°ì´í„°ê°€ ìˆë‹¤ê³  ê°€ì •
    notifyListeners();

    String? accessToken = await secureStorage.read(key: "accessToken");

    if (accessToken == null) {
      print("í† í°ì´ ì—†ìŠµë‹ˆë‹¤.");
      isLoading = false;
      notifyListeners();
      return;
    }

    print(
        "ğŸ“¢ [Flutter] fetchTodos() ìµœì´ˆ í˜¸ì¶œ: cursor=null, ì „ì²´ ê°œìˆ˜ ìš”ì²­, ê²€ìƒ‰ì–´=$keyword");


    // âœ… PageRequestDTO ë°ì´í„°ë¥¼ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ë³€í™˜
    final Uri requestUrl = Uri.parse(
      // í˜ì´ì§•_ê¸°ë°˜_ì½”ë“œ
      // "$serverIp/list?page=$currentPage&size=$pageSize&type=&keyword=&from=&to=&completed=",
      // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
      // "$serverIp/list2?size=10${lastCursorId != null ? '&cursor=$lastCursorId' : ''}",

      // âœ… ìµœì´ˆ í˜¸ì¶œì—ì„œëŠ” ì „ì²´ ê°œìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ size=0
      // "$serverIp/list2?size=10",
      // ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€,
        "$serverIp/list2?size=10${lastCursorId != null
            ? '&cursor=$lastCursorId'
            : ''}&type=$searchType&keyword=$keyword"

    );

    try {
      final response = await http.get(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
      );

      if (response.statusCode == 200) {
        final responseData = jsonDecode(utf8.decode(response.bodyBytes));
        PageResponseDTO<TodoDTO> pageResponse = PageResponseDTO.fromJson(
          responseData,
              (json) => TodoDTO.fromJson(json),
        );

        // í˜ì´ì§•_ê¸°ë°˜_ì½”ë“œ
        // todos = pageResponse.dtoList;
        // total = pageResponse.total; // âœ… ì „ì²´ ë°ì´í„° ê°œìˆ˜ ì„¤ì •
        // hasMore = pageResponse.dtoList.isNotEmpty; // âœ… ë‹¤ìŒ ë°ì´í„° ì¡´ì¬ ì—¬ë¶€ í™•ì¸

        // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
        if (pageResponse.dtoList.isNotEmpty) {
          todos = pageResponse.dtoList; // âœ… ìµœì´ˆ 10ê°œ ë°ì´í„° ì¶”ê°€
          lastCursorId = pageResponse.nextCursor; // âœ… ë‹¤ìŒ ì»¤ì„œ ì—…ë°ì´íŠ¸
          hasMore = pageResponse.hasNext; // âœ… ë‹¤ìŒ ë°ì´í„° ì—¬ë¶€ í™•ì¸
          remainingCount =
              pageResponse.total - todos.length; // âœ… ì „ì²´ ê°œìˆ˜ - ë°›ì€ ë°ì´í„° ê°œìˆ˜
          print("âœ… [Flutter] ì „ì²´ ê°œìˆ˜: ${pageResponse
              .total}, ë‚¨ì€ ê°œìˆ˜: $remainingCount");
        } else {
          lastCursorId = null; // âœ… ë§Œì•½ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì»¤ì„œ ì´ˆê¸°í™”
          hasMore = false;
        }
      } else {
        print("ì—ëŸ¬ ë°œìƒ: ${response.body}");
      }
    } catch (e) {
      print("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }

    isLoading = false;
    notifyListeners();
  }

  // âœ… ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ë•Œ ë‹¤ìŒ í˜ì´ì§€ ë¡œë“œ
  // âœ… ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ë•Œ 10ê°œì”© ì¤„ì—¬ì„œ ë°ì´í„° ìš”ì²­
  // âœ… ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ë•Œ ë‹¤ìŒ í˜ì´ì§€ ë¡œë“œ (10ê°œ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¶€í„°)
  Future<void> fetchMoreTodos() async {
    if (isFetchingMore || !hasMore || lastCursorId == null ||
        remainingCount <= 0) {
      print(
          "ğŸš¨ [Flutter] ë°ì´í„° ë¡œë”© ì¤‘ë‹¨: cursor=$lastCursorId, hasMore=$hasMore, remaining=$remainingCount");
      hasMore = false; // âœ… ë°ì´í„°ê°€ ë‚¨ì•„ ìˆì§€ ì•Šìœ¼ë©´ ë¡œë”© ì¤‘ë‹¨
      notifyListeners();
      return;
    }

    isFetchingMore = true;
    notifyListeners();

    String? accessToken = await secureStorage.read(key: "accessToken");

    if (accessToken == null) {
      print("í† í°ì´ ì—†ìŠµë‹ˆë‹¤.");
      isFetchingMore = false;
      notifyListeners();
      return;
    }

    final int fetchSize = remainingCount > 10
        ? 10
        : remainingCount; // âœ… ë‚¨ì€ ê°œìˆ˜ì—ì„œ ìµœëŒ€ 10ê°œì”© ìš”ì²­


    print(
        "ğŸ“¢ [Flutter] fetchMoreTodos() ìš”ì²­: cursor=$lastCursorId, fetchSize=$fetchSize, remaining=$remainingCount");


    final Uri requestUrl = Uri.parse(
      // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
      // "$serverIp/list?page=${currentPage + 1}&size=$pageSize&type=&keyword=&from=&to=&completed=",
      // í˜ì´ì§•_ê¸°ë°˜_ì½”ë“œ
        "$serverIp/list2?size=$fetchSize${lastCursorId != null
            ? '&cursor=$lastCursorId'
            : ''}"
    );

    try {
      final response = await http.get(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
      );

      if (response.statusCode == 200) {
        final responseData = jsonDecode(utf8.decode(response.bodyBytes));
        PageResponseDTO<TodoDTO> pageResponse = PageResponseDTO.fromJson(
          responseData,
              (json) => TodoDTO.fromJson(json),
        );

        // ì»¤ì„œ_ê¸°ë°˜_ì½”ë“œ
        if (pageResponse.dtoList.isNotEmpty) {
          todos.addAll(pageResponse.dtoList);
          lastCursorId = pageResponse.nextCursor; // âœ… ë‹¤ìŒ ì»¤ì„œ ì—…ë°ì´íŠ¸
          remainingCount -= fetchSize; // âœ… ë‚¨ì€ ê°œìˆ˜ì—ì„œ ìš”ì²­í•œ ê°œìˆ˜ë§Œí¼ ê°ì†Œ
          // âœ… ë‚¨ì€ ê°œìˆ˜ê°€ 0ì´ê±°ë‚˜ nextCursorê°€ nullì´ë©´ ë°ì´í„° ë¡œë”© ì¤‘ë‹¨
          if (remainingCount <= 0 || pageResponse.nextCursor == null) {
            hasMore = false; // âœ… ë” ì´ìƒ ë°ì´í„° ì—†ìŒ
            lastCursorId = null; // âœ… ì»¤ì„œ ì´ˆê¸°í™”
          }
          print("âœ… [Flutter] ì „ì²´ ê°œìˆ˜: ${pageResponse
              .total}, ë‚¨ì€ ê°œìˆ˜: $remainingCount");
          // í˜ì´ì§•_ê¸°ë°˜_ì½”ë“œ
          // currentPage++; // âœ… í˜ì´ì§€ ì¦ê°€
          // hasMore = pageResponse.dtoList.length == pageSize; // âœ… ë‹¤ìŒ í˜ì´ì§€ ì—¬ë¶€ í™•ì¸
        } else {
          print("ğŸš¨ [Flutter] ë” ì´ìƒ ë°ì´í„° ì—†ìŒ, hasMore=false");
          lastCursorId = null; // âœ… ë§Œì•½ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì»¤ì„œ ì´ˆê¸°í™”
          hasMore = false;
        }
      } else {
        print("ì—ëŸ¬ ë°œìƒ: ${response.body}");
      }
    } catch (e) {
      print("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }

    isFetchingMore = false;
    notifyListeners();
  }

  // ê¸€ì‘ì„± ë¶€ë¶„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬
// âœ… Todo ì‘ì„± ìš”ì²­ (`POST /api/todo`)
  Future<bool> createTodo(String title, DateTime dueDate, bool complete) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    String? mid = await getLoggedInUserId(); // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°

    if (accessToken == null || mid == null) {
      print("âš ï¸ [Flutter] ì•¡ì„¸ìŠ¤ í† í° ë˜ëŠ” ì‚¬ìš©ì ID ì—†ìŒ");
      return false;
    }

    final Uri requestUrl = Uri.parse("$serverIp/");

    final Map<String, dynamic> postData = {
      "title": title,
      "writer": mid, // âœ… ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ìë™ ì…ë ¥
      "dueDate":
      "${dueDate.year}-${dueDate.month.toString().padLeft(2, '0')}-${dueDate.day
          .toString().padLeft(2, '0')}",
      "complete": complete,
    };

    try {
      final response = await http.post(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
        body: jsonEncode(postData),
      );

      print("ğŸ“¢ [Flutter] ì‘ë‹µ ì½”ë“œ: ${response.statusCode}");
      print("ğŸ“¢ [Flutter] ì‘ë‹µ ë°”ë””: ${response.body}");

      if (response.statusCode == 200) {
        print("âœ… [Flutter] Todo ì‘ì„± ì„±ê³µ!");

        // âœ… ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
        await fetchTodos();
        notifyListeners();
        return true;
      } else {
        print("âš ï¸ [Flutter] ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.body}");
      }
    } catch (e) {
      print("âŒ [Flutter] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return false;
  }

//ì‚­ì œ ë¡œì§ ì¶”ê°€.

  Future<bool> deleteTodo(int tno) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    if (accessToken == null) {
      print("âš ï¸ [Flutter] accessToken ì—†ìŒ!");
      return false;
    }

    final Uri requestUrl = Uri.parse("$serverIp/$tno");
    print("ğŸ“¢ [Flutter] DELETE ìš”ì²­ URL: $requestUrl");

    try {
      final response = await http.delete(
        requestUrl,
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer $accessToken",
        },
      );

      if (response.statusCode == 200) {
        print("âœ… [Flutter] Todo ì‚­ì œ ì„±ê³µ!");

        // âœ… ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
        await fetchTodos(); // âœ… UI ì—…ë°ì´íŠ¸
        notifyListeners();

        return true;
      } else {
        print("âš ï¸ [Flutter] ì‚­ì œ ì‹¤íŒ¨: ${response.body}");
      }
    } catch (e) {
      print("âŒ [Flutter] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return false;
  }

  void confirmDelete(BuildContext context, int tno) {
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: const Text("ì‚­ì œ í™•ì¸"),
          content: const Text("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text("ì·¨ì†Œ"),
            ),
            TextButton(
              onPressed: () async {
                Navigator.of(context).pop(); // âœ… ë‹¤ì´ì–¼ë¡œê·¸ ë‹«ê¸°
                bool success = await deleteTodo(tno);
                if (success) {
                  ScaffoldMessenger.of(context).showSnackBar(
                    const SnackBar(content: Text("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")),
                  );
                }
              },
              child: const Text("ì‚­ì œ", style: TextStyle(color: Colors.red)),
            ),
          ],
        );
      },
    );
  }

  // âœ… Todo ìƒì„¸ ì¡°íšŒ ìš”ì²­ (`GET /api/todo/{tno}`)
  Future<TodoDTO?> fetchTodoDetails(int tno) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    if (accessToken == null) return null;

    final Uri requestUrl = Uri.parse("$serverIp/$tno");

    try {
      final response = await http.get(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
      );

      if (response.statusCode == 200) {
        final responseData = jsonDecode(utf8.decode(response.bodyBytes));
        return TodoDTO.fromJson(responseData);
      }
    } catch (e) {
      print("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return null;
  }

  // âœ… Todo ìˆ˜ì • ìš”ì²­ (`PUT /api/todo/{tno}`)
  Future<bool> updateTodo(int tno, String title, String writer,
      DateTime dueDate, bool complete) async {
    String? accessToken = await secureStorage.read(key: "accessToken");
    if (accessToken == null) return false;

    final Uri requestUrl = Uri.parse("$serverIp/$tno");

    final Map<String, dynamic> updateData = {
      "tno": tno,
      "title": title,
      "writer": writer,
      "dueDate":
      "${dueDate.year}-${dueDate.month.toString().padLeft(2, '0')}-${dueDate.day.toString().padLeft(2, '0')}", // âœ… ë‚ ì§œ í¬ë§· ìˆ˜ì •
      "complete": complete,
    };

    try {
      final response = await http.put(
        requestUrl,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
          "Authorization": "Bearer $accessToken",
        },
        body: jsonEncode(updateData),
      );
      print("ğŸ“¢ [Flutter] ì‘ë‹µ ì½”ë“œ: ${response.statusCode}");
      print("ğŸ“¢ [Flutter] ì‘ë‹µ ë°”ë””: ${response.body}");

      if (response.statusCode == 200) {
        print("âœ… [Flutter] Todo ìˆ˜ì • ì„±ê³µ!");

        // âœ… ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨
        await fetchTodos(); // âœ… Todo ë¦¬ìŠ¤íŠ¸ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
        notifyListeners(); // âœ… UI ì—…ë°ì´íŠ¸
        return true;
      } else {
        print("âš ï¸ [Flutter] ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.body}");
      }
    } catch (e) {
      print("âŒ [Flutter] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: $e");
    }
    return false;
  }
  
}


3 
í”„ë¡œë°”ì´ë” 
ì¬ì‚¬ìš©. 

4
ë¼ìš°íŒ… í•„ìš”. 
ìˆ˜ì • í¼ í™”ë©´ í•„ìš”. 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen2.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_screen/my_pd_test_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/signup_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_add_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_edit_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_list_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_login.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_signup_screen.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const TodosMainScreen(),
        '/signup': (context) => const TodosSignupScreen(),
        '/login': (context) => const LoginScreen(),
        '/pdtest1': (context) => const MyPdTestScreen(),
        '/todos': (context) => const TodosScreen(),
        '/todoCreate': (context) => const TodoCreateScreen(),
        '/todoDetail': (context) => TodoDetailScreen(tno: ModalRoute.of(context)!.settings.arguments as int),
        
      },
    );
  }
}

